type Employer {
  id: ID! @id
  name: String!
  slug: String! @unique
  address: String!
  companyNumber: String @unique
  user: [User!]
  emailSuffixes: [Suffix!] @unique @relation(onDelete: CASCADE)
  maximumAmount: Float!
  minimumServiceLength: Int!
  maxSalaryPercentage: Float!
  payrollEmail: String!
  signerEmail: String!
  updatedAt: DateTime! @updatedAt
  createdAt: DateTime! @createdAt
}

type Suffix {
  id: ID! @id
  domain: String! @unique
  employer: Employer!
}

type User {
  id: ID! @id
  employer: Employer!
  firstName: String!
  lastName: String!
  email: String! @unique
  isVerified: Boolean! @default(value: false)
  phoneNumber: String! @unique
  dob: DateTime!
  nationality: String!
  employmentStartDate: DateTime!
  annualSalary: Float!
  employeeID: String
  verificationToken: VerificationToken @relation(onDelete: CASCADE)
  gdprConsent: Boolean! 
  loan: Loan @relation(onDelete: CASCADE)
  mangoWalletId: String @unique
  mangoUserId: String @unique
  paymentRequests: [PaymentRequest!] @relation(onDelete: CASCADE)
  updatedAt: DateTime! @updatedAt
  createdAt: DateTime! @createdAt
}

type VerificationToken {
  id: ID! @id
  email: String! @unique
  token: String! @unique
  expiresAt: DateTime!
  updatedAt: DateTime! @updatedAt
  createdAt: DateTime! @createdAt
}

type Loan {
  id: ID! @id
  amount: Float!
  terms: Int!
  approved: Boolean! @default(value: false)
  agreementURL: String
  updatedAt: DateTime! @updatedAt
  createdAt: DateTime! @createdAt
}

type PaymentRequest {
  id: ID! @id
  mangoPaymentID: String @unique
  user: User! @relation(onDelete: SET_NULL)
  childcareProvider: ChildcareProvider! @relation(onDelete: SET_NULL)
  amountToPay: Float!
  consentToPay: Boolean! @default(value: false)
  reference: String
  expiresAt: DateTime
  updatedAt: DateTime! @updatedAt
  createdAt: DateTime! @createdAt
}

type ChildcareProvider {
  id: ID! @id
  email: String! @unique
  companyNumber: String! @unique
  mangoLegalUserID: String @unique
  mangoBankAccountID: String @unique
  mangoWalletId: String @unique
  approved: Boolean! @default(value: false)
  paymentRequests: [PaymentRequest!] @relation(onDelete: CASCADE)
  expiresAt: DateTime
  updatedAt: DateTime! @updatedAt
  createdAt: DateTime! @createdAt
}
